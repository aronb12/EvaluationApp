function createEvaluation(a,b,c,d,e){return{ID:a,TitleIS:b,TitleEN:c,IntroTextIS:d,IntroTextEN:e,CourseQuestions:[],TeacherQuestions:[]}}function createQuestion(a,b,c,d,e){return{ID:a,TextIS:b,TextEN:c,ImageURL:d,Type:e,Answers:[]}}function generateEvaluations(){for(var a=[],b=0;5>b;++b){for(var c=b+1,d=createEvaluation(b,"Kennslumat "+c,"Evaluation "+c,"Derp","Derp"),e=0;3>e;++e){var f=e+1,g=createQuestion(e,"Hva√∞ er derp"+f+"?","What is derp "+f+"?","","single");d.CourseQuestions.push(g)}a.push(d)}return a}var app=angular.module("EvaluationApp",["ngRoute"]);app.config(function(a){a.when("/",{templateUrl:"templates/login.html",controller:"LoginController"}).when("/home",{templateUrl:"templates/home.html",controller:"HomeController"}).when("/evaluation/:evaluationID",{templateUrl:"templates/evaluation.html",controller:"EvaluationController"}).when("/evaluation/",{templateUrl:"templates/evaluation.html",controller:"EvaluationController"}).otherwise({redirectTo:"/"})}),app.factory("ApiFactory",["$q",function(a){var b=generateEvaluations();return{getAllEvaluations:function(){var c=a.defer();return c.resolve(b),c.promise},getEvaluationById:function(c){var d=a.defer();return b[c]?d.resolve(b[c]):d.reject("No evaluation with this id"),d.promise},addEvaluation:function(){var b=a.defer();return b.promise}}}]),app.factory("LoginFactory",["$http","$q",function(a,b){var c="",d="",e="",f="";return{login:function(g,h){var i=b.defer();return a.post("http://dispatch.ru.is/h22/api/v1/login",{user:g,pass:h}).success(function(a){console.log(a),c=g,e=a.token,d=a.User.Role,i.resolve({username:g,role:a.User.Role,token:a.token})}).error(function(){i.reject(f)}),i.promise},getToken:function(){return e},getUsername:function(){return c},getRole:function(){return d}}}]),app.controller("EvaluationController",["$scope","ApiFactory","$routeParams",function(a,b,c){var d=c.evaluationID;void 0!==d?b.getEvaluationById(d).then(function(b){a.evaluation=b},function(a){console.log("Error fetching evaluation: "+a)}):a.evaluation={TitleIS:"",TitleEN:"",IntroTextIS:"",IntroTextEN:"",CourseQuestions:[],TeacherQuestions:[]},a.addAnswer=function(a){a.Answers.push("New answer")},a.addCourseQuestion=function(){a.evaluation.CourseQuestions.push({ID:a.evaluation.CourseQuestions.length,TextIS:"",TextEN:"",ImageURL:"",Type:"single",Answers:[]})}}]),app.controller("HomeController",["$scope","ApiFactory",function(a,b){b.getAllEvaluations().then(function(b){a.evaluations=b},function(){},function(){}),a.test="test"}]),app.controller("LoginController",["$scope","LoginFactory",function(a,b){a.user={},a.login=function(){b.login(a.user.username,a.user.password).then(function(b){a.info=b,console.log(b)})},a.test="test"}]);